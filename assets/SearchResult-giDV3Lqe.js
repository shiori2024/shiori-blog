import{l as I,i as Z,m as ee,p as M,q as te,s as ae,v as se,x as le,j as x,y as w,z as re,A as U,k as a,B as T,C as _,R as j,D as oe,E as ue,G as ie,H as ne,I as ce,J as ve,K as pe,L as he,M as ye,N as Ee,O as de,P as me,Q as ge,S as q}from"./app-Bp7GXqrW.js";const Be=["/","/intro.html","/about/","/bot/","/bot/config.html","/bot/deploy.html","/bot/plugins.html","/demo/","/demo/birthday.html","/demo/disable.html","/demo/layout.html","/demo/markdown.html","/demo/page.html","/link/","/music/","/navigation/","/posts/Awtrix.html","/posts/OBS.html","/posts/ReactNative.html","/posts/aplayer.html","/posts/chatGLM.html","/posts/download-fangfa.html","/posts/flutter.html","/posts/focustodo.html","/posts/jeecg.html","/posts/lively-aplayerjs.html","/posts/maven.html","/posts/mysql.html","/posts/newBlog.html","/posts/pcr.html","/posts/python-Studynotes.html","/posts/school.html","/posts/visio.html","/posts/vmware.html","/posts/vuepress%E5%AE%B9%E5%99%A8.html","/posts/vuepress%E7%BB%84%E4%BB%B6.html","/posts/xiaoai-student.html","/posts/xshell.html","/remember/","/wordCloud/","/404.html","/posts/","/category/","/category/bot/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/birthday/","/category/%E6%8C%87%E5%8D%97/","/category/diy/","/category/%E6%95%99%E7%A8%8B/","/category/react/","/category/aigc/","/category/%E7%94%9F%E4%BA%A7%E5%8A%9B/","/category/blog/","/category/%E6%B8%B8%E6%88%8F/","/category/python/","/category/%E5%AD%A6%E4%B9%A0/","/category/vuepress/","/category/%E6%9C%89%E8%B6%A3%E7%9A%84/","/tag/","/tag/bot%E5%91%BD%E4%BB%A4/","/tag/qq%E7%BE%A4%E6%9C%BA%E5%99%A8%E4%BA%BA/","/tag/nonebot/","/tag/bot%E6%8F%92%E4%BB%B6/","/tag/%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE/","/tag/bot%E9%83%A8%E7%BD%B2/","/tag/%E6%8F%92%E4%BB%B6/","/tag/birthday/","/tag/%E7%A6%81%E7%94%A8/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E5%B8%83%E5%B1%80/","/tag/markdown/","/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/%E5%88%86%E4%BA%AB/","/tag/%E5%BC%80%E6%BA%90/","/tag/%E6%8A%80%E6%9C%AF/","/tag/reactnative/","/tag/%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8/","/tag/aplayer/","/tag/%E5%B0%8F%E7%99%BD/","/tag/ai/","/tag/chatgpt/","/tag/%E6%95%99%E7%A8%8B/","/tag/%E7%AC%94%E8%AE%B0/","/tag/%E8%BD%AC%E8%BD%BD/","/tag/lively-wallpaper/","/tag/%E5%85%AC%E4%B8%BB%E8%BF%9E%E7%BB%93/","/tag/%E6%9C%BA%E5%99%A8%E4%BA%BA/","/tag/yobot/","/tag/%E5%AD%A6%E4%B9%A0/","/tag/%E7%BB%83%E4%B9%A0/","/tag/%E7%BB%84%E4%BB%B6/","/tag/vue/","/tag/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%B9%E5%99%A8/","/article/","/star/","/timeline/"],Ae="SEARCH_PRO_QUERY_HISTORY",h=I(Ae,[]),fe=()=>{const{queryHistoryCount:s}=q,l=s>0;return{enabled:l,queryHistory:h,addQueryHistory:r=>{l&&(h.value.length<s?h.value=Array.from(new Set([r,...h.value])):h.value=Array.from(new Set([r,...h.value.slice(0,s-1)])))},removeQueryHistory:r=>{h.value=[...h.value.slice(0,r),...h.value.slice(r+1)]}}},S=s=>Be[s.id]+("anchor"in s?`#${s.anchor}`:""),De="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:Q}=q,y=I(De,[]),Ce=()=>{const s=Q>0;return{enabled:s,resultHistory:y,addResultHistory:l=>{if(s){const r={link:S(l),display:l.display};"header"in l&&(r.header=l.header),y.value.length<Q?y.value=[r,...y.value]:y.value=[r,...y.value.slice(0,Q-1)]}},removeResultHistory:l=>{y.value=[...y.value.slice(0,l),...y.value.slice(l+1)]}}},be=s=>{const l=ce(),r=M(),{search:D,terminate:v}=ve(),d=x(!1),m=pe([]);return he(()=>{const E=()=>{m.value=[],d.value=!1},C=ge(g=>{d.value=!0,g?D({type:"search",query:g,locale:r.value,options:l}).then(p=>{m.value=p,d.value=!1}).catch(p=>{console.error(p),E()}):E()},q.searchDelay);U([s,r],()=>C(s.value),{immediate:!0}),ye(()=>{v()})}),{searching:d,results:m}};var Re=Z({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:l}){const r=ee(),D=M(),v=te(ae),{enabled:d,addQueryHistory:m,queryHistory:E,removeQueryHistory:C}=fe(),{enabled:g,resultHistory:p,addResultHistory:F,removeResultHistory:G}=Ce(),L=d||g,b=se(s,"query"),{results:B,searching:N}=be(b),o=le({isQuery:!0,index:0}),n=x(0),c=x(0),O=w(()=>L&&(E.value.length>0||p.value.length>0)),H=w(()=>B.value.length>0),R=w(()=>B.value[n.value]||null),Y=()=>{const{isQuery:e,index:t}=o;t===0?(o.isQuery=!e,o.index=e?p.value.length-1:E.value.length-1):o.index=t-1},z=()=>{const{isQuery:e,index:t}=o;t===(e?E.value.length-1:p.value.length-1)?(o.isQuery=!e,o.index=0):o.index=t+1},J=()=>{n.value=n.value>0?n.value-1:B.value.length-1,c.value=R.value.contents.length-1},K=()=>{n.value=n.value<B.value.length-1?n.value+1:0,c.value=0},V=()=>{c.value<R.value.contents.length-1?c.value+=1:K()},$=()=>{c.value>0?c.value-=1:J()},k=e=>e.map(t=>Ee(t)?t:a(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=de[e.index]||"$content",[u,f=""]=me(t)?t[D.value].split("$content"):t.split("$content");return e.display.map(i=>a("div",k([u,...i,f])))}return e.display.map(t=>a("div",k(t)))},A=()=>{n.value=0,c.value=0,l("updateQuery",""),l("close")};return re("keydown",e=>{if(s.isFocusing){if(H.value){if(e.key==="ArrowUp")$();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=R.value.contents[c.value];m(s.query),F(t),r.push(S(t)),A()}}else if(g){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:t}=o;o.isQuery?(l("updateQuery",E.value[t]),e.preventDefault()):(r.push(p.value[t].link),A())}}}}),U([n,c],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:b.value?!H.value:!O.value}],id:"search-pro-results"},b.value===""?L?O.value?[d?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},v.value.queryHistory),E.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:o.isQuery&&o.index===t}],onClick:()=>{l("updateQuery",e)}},[a(T,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:_,onClick:u=>{u.preventDefault(),u.stopPropagation(),C(t)}})]))])):null,g?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},v.value.resultHistory),p.value.map((e,t)=>a(j,{to:e.link,class:["search-pro-result-item",{active:!o.isQuery&&o.index===t}],onClick:()=>{A()}},()=>[a(T,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(u=>k(u)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:_,onClick:u=>{u.preventDefault(),u.stopPropagation(),G(t)}})]))])):null]:v.value.emptyHistory:v.value.emptyResult:N.value?a(oe,{hint:v.value.searching}):H.value?a("ul",{class:"search-pro-result-list"},B.value.map(({title:e,contents:t},u)=>{const f=n.value===u;return a("li",{class:["search-pro-result-list-item",{active:f}]},[a("div",{class:"search-pro-result-title"},e||v.value.defaultTitle),t.map((i,X)=>{const P=f&&c.value===X;return a(j,{to:S(i),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{m(s.query),F(i),A()}},()=>[i.type==="text"?null:a(i.type==="title"?ue:i.type==="heading"?ie:ne,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[i.type==="text"&&i.header?a("div",{class:"content-header"},i.header):null,a("div",W(i))])])})])})):v.value.emptyResult)}});export{Re as default};
